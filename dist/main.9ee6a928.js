"use strict";(self.webpackChunkgrace_shopper=self.webpackChunkgrace_shopper||[]).push([[179],{1962:(e,t,a)=>{var r=a(7294),n=a(3935),l=a(8216),c=a(6550);const o=(0,a(9731).lX)();var m=a(4890),i=a(4500),d=a(3894),u=a(8500),p=a(9669),E=a.n(p);const h="token",g="SET_AUTH",v=e=>({type:g,auth:e}),b=()=>async e=>{const t=window.localStorage.getItem(h);if(t){const a=await E().get("/auth/me",{headers:{authorization:t}});return e(v(a.data))}},f=()=>(window.localStorage.removeItem(h),o.push("/login"),{type:g,auth:{}}),N="SET_PRODUCTS",w="CREATE_PRODUCT",y="DELETE_PRODUCT",C=()=>async e=>{var t;e((t=(await E().get("/api/products")).data,{type:N,products:t}))},x="token",S="SET_PRODUCT",k="UPDATE_PRODUCT",R=e=>({type:S,product:e}),T=e=>async t=>{try{const a=await E().get(`/api/products/${e}`);t(R(a.data))}catch(e){console.log(e.response)}},A="SET_ORDERS",P={reviews:[],singleReview:{}},U="SET_CART",Z=e=>({type:U,cart:e}),D="token",I=()=>async e=>{try{const t=window.localStorage.getItem(D),{data:a}=await E().get("/api/cart",{headers:{authorization:t}});e(Z(a))}catch(e){console.error("fetchCartThunk not working",e)}},$=e=>async t=>{try{const a=window.localStorage.getItem(D),{data:r}=await E().post("/api/cart/addToCart",e,{headers:{authorization:a}});t(Z(r))}catch(e){console.error("addCartThunk not workinh",e)}},F="SET_USER",j="UPDATE_USER",L=e=>({type:F,user:e}),O="token",_=e=>async t=>{try{const a=window.localStorage.getItem(O),r=await E().get(`/api/users/${e}`,{headers:{authorization:a}});t(L(r.data))}catch(e){console.log(e.response)}},W="SET_USERS",H=()=>async e=>{const t=window.localStorage.getItem(q);var a;e((a=(await E().get("/api/users",{headers:{authorization:t}})).data,{type:W,users:a}))},q="token",z=(0,m.UY)({auth:function(e={},t){return t.type===g?t.auth:e},products:function(e=[],t){switch(t.type){case N:return t.products;case w:return[...e,t.product];case y:return e.filter((e=>e.id!==t.product.id));default:return e}},product:(e={},t)=>{switch(t.type){case S:return t.product;case k:return{...e,...t.product};default:return e}},orders:function(e=[],t){switch(t.type){case A:return t.orders;case"CREATE_ORDER":return[...e,t.order];case"DELETE_ORDER":return e.filter((e=>e.id!==t.order.id));default:return e}},order:(e={},t)=>{switch(t.type){case"SET_ORDER":return t.order;case"UPDATE_ORDER":return{...e,...t.order};default:return e}},reviewReducer:(e=P,t)=>{switch(t.type){case"CREATE_REVIEW":return{reviews:[...e.reviews,t.review],singleReview:t.review};case"EDIT_REVIEW":const a=e.reviews.filter((e=>e.id!==t.review.id));return{...e,reviews:[...a,t.review]};case"DELETE_REVIEW":const r=e.reviews.filter((e=>e.id!==t.review.id));return{...e,reviews:r};default:return e}},cart:(e={},t)=>{switch(t.type){case U:case"UPDATE_CART":return t.cart;default:return e}},user:function(e={},t){switch(t.type){case F:return t.user;case j:return{...e,...t.user};default:return e}},users:function(e=[],t){switch(t.type){case W:return t.users;case"CREATE_USER":return[...e,t.user];case"DELETE_USER":return e.filter((e=>e.id!==t.user.id));default:return e}}}),M=(0,u.Uo)((0,m.md)(d.Z,(0,i.createLogger)({collapsed:!0}))),B=(0,m.MT)(z,M);var Q=a(3727),V=a(5005),G=a(1330),Y=a(7625),J=a(1436);const K=(0,l.$j)((e=>({isLoggedIn:!!e.auth.id,isAdmin:!!e.auth.isAdmin,id:e.auth.id})),(e=>({handleClick(){e(f())}})))((({isLoggedIn:e,id:t})=>r.createElement("nav",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between p-3 black-bg"},r.createElement(Q.rU,{to:"/",className:"logo"},r.createElement(G.Z,{lang:"en","data-id":"c3KHuMF","data-context":"false",src:"https://i.imgur.com/c3KHuMF.png",className:"d-flex align-items-center col-md-3 mb-2 mb-md-0 text-black text-decoration-none imgur-embed-pub"})),r.createElement("ul",{className:"nav col-12 col-md-auto mb-2 justify-content-center mb-md-0"},r.createElement("li",null,r.createElement(Q.rU,{to:"/",className:"nav-link px-2 link-secondary"},"Home")),r.createElement("li",null,r.createElement(Q.rU,{to:`/users/${t}/`,className:"nav-link px-2 link-light"},"My Profile"))),r.createElement("div",{className:"text-end"},r.createElement(Q.rU,{to:"/cart"},r.createElement(Y.G,{icon:J.yYj})),e?r.createElement(V.Z,{variant:"light",href:"/logout",onClick:()=>f()},"Logout"):r.createElement("span",null,r.createElement(V.Z,{variant:"light",href:"/login"},"Login"),r.createElement(V.Z,{variant:"light",href:"/signup"},"Signup"))))));var X=a(7833);const ee=e=>{const{name:t,displayName:a,handleSubmit:n,error:l,address:c}=e;return r.createElement("div",{className:"d-flex flex-column w-50 m-auto mt-5 text-center form form-signin"},r.createElement("h2",null,a),r.createElement(X.Z,{onSubmit:n,name:t,className:"needs-validation"},r.createElement(X.Z.Group,{className:"mb-3 w-100",controlId:"firstName"},r.createElement(X.Z.Control,{name:"firstName",type:"text",placeholder:"First Name"})),r.createElement(X.Z.Group,{className:"mb-3 w-100",controlId:"lastName"},r.createElement(X.Z.Control,{name:"lastName",type:"text",placeholder:"Last Name"})),r.createElement(X.Z.Group,{className:"mb-3 w-100",controlId:"address"},r.createElement(X.Z.Control,{name:"address",type:"text",placeholder:"Address"})),r.createElement(X.Z.Group,{className:"mb-3 w-100",controlId:"email"},r.createElement(X.Z.Control,{name:"email",type:"email",placeholder:"Enter email",required:!0}),r.createElement(X.Z.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.createElement(X.Z.Group,{className:"mb-3 w-100",controlId:"password"},r.createElement(X.Z.Control,{name:"password",type:"password",placeholder:"Password",required:!0})),r.createElement("div",null,r.createElement(V.Z,{type:"submit"},a)),l&&l.response&&r.createElement("div",null," ",l.response.data," ")))},te=e=>({handleSubmit(t){t.preventDefault();const a=t.target.name,r=t.target.firstName.value,n=t.target.lastName.value,l=t.target.email.value,c=t.target.password.value,s=t.target.address.value;e(((e,t,a,r,n,l)=>async c=>{try{const s=await E().post(`/auth/${n}`,{firstName:e,lastName:t,email:a,password:r,address:l});window.localStorage.setItem(h,s.data.token),c(b()),o.push("/")}catch(e){return c(v({error:e}))}})(r,n,l,c,a,s))}}),ae=(0,l.$j)((e=>({name:"login",displayName:"Login",error:e.auth.error})),te)(ee),re=(0,l.$j)((e=>({name:"signup",displayName:"Sign Up",error:e.auth.error})),te)(ee);var ne=a(4051),le=a(3228),ce=a(1555);const se=(0,l.$j)((e=>({allProducts:e.products})),(e=>({getProducts:()=>e(C())})))((function(e,{placeholder:t}){let[a,n]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[s,o]=(0,r.useState)(e.allProducts);return(0,r.useEffect)((()=>{e.getProducts(),o(e.products)}),[]),r.createElement("div",{className:"search"},r.createElement("div",{className:"searchInputs"},r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",placeholder:e.placeholder,value:l,onChange:t=>{const a=t.target.value;c(a);const r=e.products.filter((e=>e.productName.toLowerCase().includes(a.toLowerCase())));n(""===a?[]:r)}}),r.createElement("div",{className:"searchIcon"},0===a.length?r.createElement("i",{className:"fas fa-search"}):r.createElement(V.Z,{onClick:()=>{n([]),c("")}},"Clear"))),0!=a.length&&r.createElement("div",{className:"dataResults"},a.slice(0,10).map((e=>r.createElement("div",{key:e.id},r.createElement(Q.rU,{className:"dataItem",to:`/products/${e.id}`,target:"blank"},r.createElement("p",null,e.productName))))))))}));class oe extends r.Component{constructor(){super(),this.state={filter:"All",numOfVisibleProducts:8},this.handleChange=this.handleChange.bind(this),this.handleScroll=this.handleScroll.bind(this),window.addEventListener("scroll",this.handleScroll)}componentDidMount(){this.props.getProducts()}handleChange(e){this.setState({filter:e.target.value})}handleScroll(){document.documentElement.scrollHeight-document.documentElement.scrollTop<=document.documentElement.clientHeight&&this.setState({numOfVisibleProducts:this.state.numOfVisibleProducts+8})}render(){const{products:e}=this.props,{filter:t,numOfVisibleProducts:a}=this.state,n=e.filter((e=>{switch(t){case"iRobot":return"iRobot"===e.brand;case"Tesvor":return"Tesvor"===e.brand;case"Samsung":return"Samsung"===e.brand;case"Eufy":return"Eufy"===e.brand;case"Roborock":return"Roborock"===e.brand;case"iLife":return"iLife"===e.brand;default:return e}}));return r.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between p-5 mb-5"},r.createElement(se,{placeholder:"Enter product name...",products:e,className:"d-flex align-items-center mb-2 mb-md-0"}),r.createElement("div",{className:"text-end"},r.createElement("label",null,"Find By Brand:"),r.createElement("select",{id:"brand",value:t,onChange:this.handleChange,className:"custom-select"},r.createElement("option",{value:"All"},"All"),r.createElement("option",{value:"iRobot"},"iRobot"),r.createElement("option",{value:"Tesvor"},"Tesvor"),r.createElement("option",{value:"Samsung"},"Samsung"),r.createElement("option",{value:"Eufy"},"Eufy"),r.createElement("option",{value:"Roborock"},"Roborock"),r.createElement("option",{value:"iLife"},"iLife"))),r.createElement("div",{className:"mt-5"},r.createElement(ne.Z,{xs:1,md:4,className:"g-4"},n.slice(0,a).map((e=>r.createElement(ce.Z,{key:e.id},r.createElement(le.Z,null,r.createElement(le.Z.Img,{variant:"top",className:"card-img-top",src:e.imageUrl,alt:"image of product"}),r.createElement(le.Z.Body,null,r.createElement(le.Z.Title,null,r.createElement(Q.rU,{to:`/products/${e.id}`},e.productName)),r.createElement(le.Z.Text,null,e.price)))))))))}}const me=(0,l.$j)((({products:e})=>({products:e})),(e=>({getProducts:()=>e(C())})))(oe);class ie extends r.Component{constructor(e){super(e)}componentDidMount(){this.props.getProducts()}render(){return r.createElement("div",{className:"all-products w-100"},r.createElement("div",{className:"position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light hero-image"},r.createElement("div",{className:"p-lg-5 mx-auto my-5"},r.createElement("h1",{className:"display-4 fw-normal text-light"},"Shop"))),r.createElement(me,null))}}const de=(0,l.$j)((e=>({products:e.products,isAdmin:e.auth.isAdmin})),(e=>({getProducts:()=>e(C())})))(ie);class ue extends r.Component{constructor(e){super(e),this.state={firstName:e.user.firstName,lastName:e.user.lastName,address:e.user.address,email:e.user.email,password:e.user.password}}componentDidUpdate(e){e.user.id!==this.props.user.id&&this.setState({firstName:this.props.user.firstName||"",lastName:this.props.user.lastName||"",address:this.props.user.address||"",password:this.props.user.password||"",s})}handleChange=e=>{this.setState({[e.target.name]:e.target.value})};handleSubmit=e=>{e.preventDefault(),this.props.updateUser({...this.props.user,...this.state})};render(){const{firstName:e,lastName:t,address:a,password:n}=this.state,{handleSubmit:l,handleChange:c}=this;return r.createElement("div",null,r.createElement("form",{className:"edit-form needs-validation",onSubmit:l},r.createElement("label",{htmlFor:"firstName"},"First Name:"),r.createElement("input",{name:"firstName",className:"form-change",onChange:c,value:e||""}),r.createElement("br",null),r.createElement("label",{htmlFor:"lastName"},"Last Name:"),r.createElement("input",{name:"lastName",className:"form-change",onChange:c,value:t||""}),r.createElement("br",null),r.createElement("label",{htmlFor:"address"},"Address:"),r.createElement("input",{name:"address",className:"form-change",onChange:c,value:a||""}),r.createElement("br",null),r.createElement("label",{htmlFor:"password"},"Password:"),r.createElement("input",{name:"password",type:"password",className:"form-change",onChange:c,value:n||""}),r.createElement("br",null),r.createElement(V.Z,{type:"submit"},"Submit"),r.createElement(Q.rU,{to:"/home"},r.createElement(V.Z,{type:"button",variant:"secondary"},"Cancel"))))}}const pe=(0,l.$j)((({user:e})=>({user:e})),((e,{history:t})=>({updateUser:t=>e((e=>async t=>{try{const a=window.localStorage.getItem(O);t((e=>({type:j,user:e}))((await E().put(`/api/users/${e.id}`,e,{headers:{authorization:a}})).data))}catch(e){console.log(e.response)}})(t)),fetchUser:t=>e(_(t)),clearUser:()=>e(L({}))})))(ue);class Ee extends r.Component{constructor(){super()}componentDidMount(){this.props.getUsers()}render(){const{users:e}=this.props;return r.createElement("div",null,r.createElement("h4",null,"Name:"),e.map((e=>r.createElement("div",{key:e.id},r.createElement("div",null,r.createElement("h6",null,e.firstName," ",e.lastName)),r.createElement("div",null," ",e.email," "),r.createElement(pe,null),r.createElement("br",null),r.createElement("br",null)))),r.createElement("br",null),r.createElement("h6",null,"Email:"),e.map((e=>r.createElement("div",{key:e.id},e.email))))}}const he=(0,l.$j)((e=>({users:e.users})),(e=>({getUsers:()=>e(H())})))(Ee);var ge=a(2052);const ve=()=>r.createElement(ge.Z,{label:"Confirm Payment",name:"Ready To Roomba",description:"Thank you for your support!",panelLabel:"Confirm",token:e=>{const t={amount:999,token:e};E().post("/api/cart/stripe",t).then((e=>{alert("Payment successful")})).catch((e=>{alert("Payment declined")}))},stripeKey:"pk_test_51LUbVTEXNlVtLEphjQMCFjrln5Vt91r2BE6koJHyUaDp1qTSnaC8LP8OJ4UnpJBCGPTYTqP5ZtHnzOEYC54JhT0600c3UdcJCe",image:"https://scalebranding.com/wp-content/uploads/2021/07/Star-game-robot-logo.jpg",billingAddress:!1}),be=(0,l.$j)((e=>({id:e.auth.id,firstName:e.auth.firstName,lastName:e.auth.lastName,email:e.auth.email,address:e.auth.address,isAdmin:e.auth.isAdmin})))((e=>{const{firstName:t,lastName:a,email:n,address:l,id:c,isAdmin:s}=e;return r.createElement("div",null,r.createElement("div",null,c?r.createElement("div",null,r.createElement("h3",null,"Billing Information: "),r.createElement("br",null),r.createElement("h4",null,"Full Name: "),r.createElement("h5",null,t," ",a),r.createElement("br",null),r.createElement("h4",null,"Email: "),r.createElement("h5",null,n),r.createElement("br",null),r.createElement("h4",null,"Address: "),r.createElement("h5",null,l),r.createElement("br",null),r.createElement(ve,null,"Payment")):r.createElement("div",null,r.createElement("h4",null,"Don't have an account?"),r.createElement(V.Z,{href:"/signup",variant:"secondary"},"Register here"))))}));var fe=a(5147);const Ne=(0,l.$j)((e=>({cart:e.cart,product:e.product})),(e=>({removeFromCart:t=>{return e((a=t,async e=>{try{const t=window.localStorage.getItem(D),{data:r}=await E().post("/api/cart/removeFromCart",a,{headers:{authorization:t}});e(Z(r))}catch(e){console.error("removeProductFromCartThunk not working",e)}}));var a},addToCart:t=>e($(t))})))((({cart:e,removeFromCart:t,addToCart:a})=>{const n=e.lineItems||[];let l=0;return r.createElement("div",{className:"p-5 mb-5"},r.createElement("h2",null,"Cart"),0===n.length?r.createElement("p",null,"Your cart is empty"):r.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between"},r.createElement(fe.Z,{className:"mt-5"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Image"),r.createElement("th",null,"Product Name"),r.createElement("th",null,"Quantity"),r.createElement("th",null,"Price"))),r.createElement("tbody",null,n.map((e=>r.createElement("tr",{key:e.id},r.createElement("td",null,r.createElement("img",{className:"cart-img",src:e.product.imageUrl})),r.createElement("td",null,e.product.productName),r.createElement("td",null,r.createElement(V.Z,{onClick:()=>t(e.product),className:"btn-link"},r.createElement("i",{className:"bi bi-chevron-down"})),e.orderQuantity,r.createElement(V.Z,{onClick:()=>a(e.product),className:"btn-link"},r.createElement("i",{className:"bi bi-chevron-up"}))),r.createElement("td",null,"$ ",e.product.price),r.createElement("td",{hidden:!0},l+=e.product.price*e.orderQuantity)))))),r.createElement("div",{className:"w-100 text-end p-5"},r.createElement("div",null,r.createElement("label",null,"Subtotal:")," $ ",l.toFixed(2)),r.createElement("div",null,r.createElement("label",null,"Tax:")," $ ",(.08875*l).toFixed(2)),r.createElement("div",null,r.createElement("label",null,"Total:")," $ ",(1.08875*l).toFixed(2)),r.createElement("div",{className:"w-100 text-end "},r.createElement(V.Z,{href:"/products/",variant:"secondary",className:"back-2-shopping"},"Back to Shopping"),r.createElement(V.Z,{href:"/checkout",variant:"secondary"},"Checkout")))))})),we=(0,l.$j)((e=>({cart:e.cart,product:e.product})),(e=>({fetchCart:t=>e(I())})))((e=>{const t=e.cart.lineItems||[];let a=0;return r.createElement("div",null,r.createElement(Q.rU,{to:"/cart"},r.createElement("button",null,"Edit cart")),r.createElement("br",null),r.createElement("br",null),r.createElement("h1",null,"Order Summary: "),r.createElement("br",null),0===t.length?r.createElement("div",null,r.createElement("div",null,"You don't have anything to checkout"),r.createElement("br",null),r.createElement(Q.rU,{to:"/products"},r.createElement("button",null,"Shop"))):r.createElement("div",null,r.createElement("ul",null,t.map((e=>r.createElement("div",{key:e.id},r.createElement("li",null,r.createElement("h4",null,e.product.productName),r.createElement("div",null,"qty: ",e.orderQuantity),r.createElement("div",null,"$ ",e.product.price),r.createElement("br",null)),r.createElement("div",{hidden:!0},a+=e.product.price*e.orderQuantity)))))),r.createElement("div",null,r.createElement("div",null,"Total(USD): $ ",a.toFixed(2)),r.createElement("div",null,"Tax: $ ",(.08875*a).toFixed(2)),r.createElement("div",null,"Grand Total: $ ",(1.08875*a).toFixed(2))),r.createElement("br",null),r.createElement(be,null))}));class ye extends r.Component{constructor(e){super(e),this.state={title:"",customerReview:"",starRating:""},this.handleChange=this.handleChange.bind(this),this.createReviewHandler=this.createReviewHandler.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}createReviewHandler(e){e.preventDefault();const t={...this.state,productId:this.props.productId};this.props.createReview(t)}render(){if(this.props.user){const e=[1,2,3,4,5];return r.createElement("div",null,r.createElement("form",{onSubmit:this.createReviewHandler,className:"needs-validation"},r.createElement("h3",null,"How satisfied were you with our product?ðŸ˜"),r.createElement("div",null,r.createElement("div",null,r.createElement("label",{htmlFor:"title"},"Title: "),r.createElement("input",{type:"text",value:this.state.title,name:"title",onChange:this.handleChange,placeholder:"title..."})),r.createElement("div",null,r.createElement("label",{htmlFor:"customerReview"},"Description: "),r.createElement("textarea",{type:"text",value:this.state.customerReview,name:"customerReview",onChange:this.handleChange,placeholder:"review..."})),r.createElement("div",null,r.createElement("label",{htmlFor:"starRating"},"Rating: "),r.createElement("select",{name:"starRating",onChange:this.handleChange},e.map((e=>{starRating}))),r.createElement(V.Z,{type:"submit"},"Submit Review")))))}return null}}const Ce=(0,l.$j)((e=>({productId:e.product.id,product:e.product,reviews:e.product.reviews,reviewReducer:e.reviewReducer})),(e=>{}))(ye),xe=()=>r.createElement("div",{className:"home-page"},r.createElement("img",{id:"not-found-img",src:"https://thumbs.dreamstime.com/b/error-concept-white-background-sign-logo-icon-error-concept-simple-vector-icon-123196462.jpg"}));class Se extends r.Component{constructor(e){super(e)}componentDidMount(){this.props.getUserOrders()}render(){const e=this.props.orders;return r.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between p-5 mb-5"},r.createElement("h2",null,"Order History"),r.createElement(fe.Z,{className:"mt-5"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Order Id"),r.createElement("th",null,"Status"),r.createElement("th",null,"Date"),r.createElement("th",null,"Total"))),r.createElement("tbody",null,e.map((e=>r.createElement("tr",{key:e.id},r.createElement("td",null,e.id),r.createElement("td",null,e.status),r.createElement("td",null,e.updatedAt),r.createElement("td",null,"TODO")))))))}}const ke=(0,l.$j)((e=>({orders:e.orders})),(e=>({getUserOrders:()=>e((async e=>{try{const t=window.localStorage.getItem("token");if(t){const{data:a}=await E().get("/auth/me",{headers:{authorization:t}}),{id:r}=a,{data:n}=await E().get(`/api/users/${r}/orders`,{headers:{authorization:t}});e((e=>({type:A,orders:e}))(n))}}catch(e){console.log(e)}}))})))(Se);class Re extends r.Component{constructor(e){super(e),this.rating=this.rating.bind(this)}rating(e){return 5===e?r.createElement("span",{className:"review-stars"},"â˜…â˜…â˜…â˜…â˜…"):4===e?r.createElement("span",{className:"review-stars"},"â˜…â˜…â˜…â˜…"):3===e?r.createElement("span",{className:"review-stars"},"â˜…â˜…â˜…"):2===e?r.createElement("span",{className:"review-stars"},"â˜…â˜…"):1===e?r.createElement("span",{className:"review-stars"},"â˜…"):void 0}render(){return this.props.reviews?r.createElement("div",null,r.createElement("h2",null,"Reviews"),r.createElement("div",null,this.props.reviews.map((e=>r.createElement("div",{key:e.id},r.createElement("div",null,r.createElement("div",null,this.rating(e.starRating),r.createElement("h3",{style:{display:"inline-block"}},e.title)),r.createElement("p",null,"By ",e.owner),r.createElement("p",null,e.customerReview))))))):r.createElement("div",null,r.createElement("h2",null,"This product has no reviews."))}}const Te=(0,l.$j)((e=>({reviews:e.product.reviews})),null)(Re);class Ae extends r.Component{constructor(e){super(e),this.state={productName:"",brand:"",description:"",inventoryQty:"",price:""},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange=e=>{this.setState({[e.target.name]:e.target.value})};handleSubmit=e=>{e.preventDefault();const{updateProduct:t,fetchProduct:a,id:r}=this.props,{productName:n,brand:l,description:c,price:s}=this.state;t(r,{productName:n,brand:l,description:c,price:s}),a(r)};render(){const{productName:e,brand:t,description:a,price:n}=this.state,{handleSubmit:l,handleChange:c}=this;return r.createElement("div",null,r.createElement("h2",null,"Update Product:"),r.createElement("form",{id:"edit-form",onSubmit:l,className:"needs-validation"},r.createElement("label",{htmlFor:"productName"},"Name:"),r.createElement("input",{name:"productName",className:"form-change",onChange:c,value:e||"",required:!0}),r.createElement("br",null),r.createElement("label",{htmlFor:"brand"},"Brand:"),r.createElement("input",{name:"brand",className:"form-change",onChange:c,value:t||"",required:!0}),r.createElement("br",null),r.createElement("label",{htmlFor:"description"},"Description:"),r.createElement("input",{name:"description",className:"form-change",onChange:c,value:a||"",required:!0}),r.createElement("br",null),r.createElement("label",{htmlFor:"price"},"Price:"),r.createElement("input",{name:"price",className:"form-change",onChange:c,value:n||"",required:!0}),r.createElement("br",null),r.createElement(V.Z,{type:"submit"},"Submit"),r.createElement(Q.rU,{to:"/"},r.createElement(V.Z,{type:"button"},"Cancel"))))}}const Pe=(0,l.$j)(null,(e=>({updateProduct:(t,a)=>e(((e,t)=>{const a=window.localStorage.getItem("token");return async r=>{try{r((e=>({type:k,product:e}))((await E().put(`/api/products/${e}`,t,{headers:{authorization:a}})).data))}catch(e){console.log(e.response)}}})(t,a)),fetchProduct:t=>e(T(t)),clearProduct:()=>e(R({}))})))(Ae);class Ue extends r.Component{constructor(){super(),this.clickHandler=this.clickHandler.bind(this)}componentDidMount(){const{id:e}=this.props.match.params;this.props.getProduct(e)}componentDidUpdate(e){e.product.id!==this.props.product.id&&this.props.getProduct(this.props.product.id)}clickHandler(e){e.preventDefault();const{fetchProducts:t}=this.props;t()}render(){const{product:e,addToCart:t,deleteProduct:a,isAdmin:n}=this.props;return e?r.createElement("div",null,r.createElement("section",{className:"py-5"},r.createElement("div",{className:"container px-4 px-lg-5 my-5",key:e.id},r.createElement("div",{className:"row gx-4 gx-lg-5 align-items-center"},r.createElement("div",{className:"col-md-6"},r.createElement("img",{className:"card-img-top mb-5 mb-md-0",src:e.imageUrl,alt:"image of product"})),r.createElement("div",{className:"col-md-6"},r.createElement("div",{className:"small mb-1"},"SKU: ",e.id),r.createElement("h2",{className:"display-5 fw-bolder"},e.productName),r.createElement("div",{className:"fs-5 mb-5"},r.createElement("span",{className:"text-decoration-line-through"},"$1000.00"),r.createElement("span",null,"Â "),r.createElement("span",null,"$",e.price)),r.createElement("p",{className:"lead"},e.description),r.createElement("div",{className:"d-flex"},r.createElement(V.Z,{type:"button",onClick:()=>t(e)},r.createElement("i",{className:"bi-cart-fill me-1"}),"Add to cart"))))),r.createElement("div",{className:"container px-4 px-lg-5 my-5"},r.createElement(Te,{productId:e.id}),r.createElement(Q.rU,{to:`/products/${e.id}/add`},r.createElement(V.Z,{type:"button"},"Add Review"))),r.createElement("div",{id:"accordionFlush"},r.createElement("div",null,r.createElement("div",null,n?r.createElement("div",null,r.createElement(Pe,{id:e.id}),r.createElement("br",null),r.createElement(V.Z,{type:"button",onClick:t=>{a(e.id),this.clickHandler(t)}},"Delete")):null),r.createElement("br",null),r.createElement("br",null))))):r.createElement(xe,null)}}const Ze=(0,l.$j)((e=>({product:e.product,isAdmin:e.auth.isAdmin})),(e=>({fetchProducts:()=>e(C()),getProduct:t=>e(T(t)),deleteProduct:t=>e(((e,t)=>async a=>{try{const r=window.localStorage.getItem(x),{data:n}=await E().delete(`/api/products/${e}`,{headers:{authorization:r}});a((e=>({type:y,product:e}))(n)),t.push("/products")}catch(e){console.log(e.response)}})(t,history)),addToCart:t=>e($(t))})))(Ue);class De extends r.Component{constructor(){super()}handleChange=e=>{this.setState({[e.target.name]:e.target.value})};handleSubmit=e=>{e.preventDefault();const{products:t,createProduct:a}=this.props;a({...t,...this.state})};render(){const{products:e}=this.props,{productName:t,brand:a,description:n,price:l,inventoryQty:c}=e,{handleSubmit:s,handleChange:o}=this;return r.createElement("form",{id:"create-form",className:"needs-validation",onSubmit:s},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"productName"},"Name:"),r.createElement("input",{name:"productName",type:"text",className:"form-control",onChange:o,value:t,required:!0}),r.createElement("div",{className:"invalid-feedback"},"Please enter a name.")),r.createElement("br",null),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"brand"},"Brand:"),r.createElement("input",{name:"brand",type:"text",className:"form-control",onChange:o,value:a,required:!0}),r.createElement("div",{className:"invalid-feedback"},"Please enter a brand.")),r.createElement("br",null),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"description"},"Description:"),r.createElement("textarea",{name:"description",className:"form-control",onChange:o,value:n,rows:"3",required:!0})),r.createElement("br",null),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"price"},"Price:"),r.createElement("textarea",{name:"price",className:"form-control",onChange:o,value:l,rows:"3",required:!0})),r.createElement("br",null),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"inventoryQty"},"Quantity:"),r.createElement("textarea",{name:"inventoryQty",className:"form-control",onChange:o,value:c,rows:"3",required:!0})),r.createElement("br",null),r.createElement(V.Z,{type:"submit"},"Submit"),r.createElement(Q.rU,{to:"/products"},r.createElement(V.Z,{type:"button"},"Cancel")))}}const Ie=(0,l.$j)((e=>({products:e.products})),((e,{history:t})=>({createProduct:a=>e(((e,t)=>async a=>{try{const r=window.localStorage.getItem(x);a((e=>({type:w,product:e}))((await E().post("/api/products",e,{headers:{authorization:r}})).data)),t.push("/products")}catch(e){console.log(e.response)}})(a,t))})))(De);function $e(e){return r.createElement("div",{className:"d-flex flex-column flex-shrink-0 p-3 black-bg",style:{width:280}},r.createElement("a",{href:"/",className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"},r.createElement("span",{className:"fs-4"},"My Account")),r.createElement("hr",null),r.createElement("ul",{className:"nav nav-pills flex-column mb-auto"},r.createElement("li",{className:"nav-item"},r.createElement("a",{href:"#",className:"nav-link active","aria-current":"page"},"Home")),r.createElement("li",null,r.createElement("a",{href:"#",className:"nav-link text-white"},"Dashboard")),r.createElement("li",null,r.createElement("a",{href:"#",className:"nav-link text-white"},"Orders")),r.createElement("li",null,r.createElement("a",{href:"#",className:"nav-link text-white"},"Products")),r.createElement("li",null,r.createElement("a",{href:"#",className:"nav-link text-white"},"Customers")),r.createElement("li",{className:"border-top my-3 text-white"}),r.createElement("li",{className:"mb-1 text-white"},r.createElement("button",{className:"btn d-inline-flex align-items-center rounded border-0 text-white"},"Account"),r.createElement("div",null,r.createElement("ul",{className:"list-unstyled fw-normal pb-1 small"},r.createElement("li",null,r.createElement("a",{href:"#",className:"d-inline-flex text-decoration-none rounded text-white"},"New...")),r.createElement("li",null,r.createElement("a",{href:"#",className:"d-inline-flex text-decoration-none rounded text-white"},"Profile")),r.createElement("li",null,r.createElement("a",{href:"#",className:"d-inline-flex text-decoration-none rounded text-white"},"Settings")),r.createElement("li",null,r.createElement("a",{href:"#",className:"d-inline-flex text-decoration-none rounded text-white"},"Sign out")))))))}const Fe=(0,l.$j)((e=>({id:e.auth.id,firstName:e.auth.firstName,lastName:e.auth.lastName,isAdmin:e.auth.isAdmin,user:e.user,users:e.users})),(e=>({fetchUsers:()=>e(H()),getUser:t=>e(_(t))})))((e=>{const{firstName:t,lastName:a,isAdmin:n,id:l}=e,[c,s]=(0,r.useState)(!1),[o,m]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1);return r.createElement("div",{className:"row"},r.createElement($e,{className:"col-4"}),r.createElement("section",{className:"col-8 mt-5"},r.createElement("div",null,r.createElement("div",null,l?r.createElement("h3",null,"Welcome ",t," ",a):r.createElement("h3",null," Welcome lurking stranger!"))),r.createElement("h6",null,r.createElement("br",null),r.createElement(V.Z,{onClick:()=>s(!c)},"Update Your Information"),c&&r.createElement(pe,null,"show/hide typography")),r.createElement("br",null),r.createElement(V.Z,{onClick:()=>p(!u)},"Order History"),u&&r.createElement(ke,null,"show/hide typography"),r.createElement("hr",null),r.createElement("br",null),n?r.createElement("div",null,r.createElement("h3",null,"Hello, Admin!"),r.createElement("div",null,r.createElement("h6",null,"Edit a Product"),r.createElement(Q.rU,{to:"/products/"},r.createElement(V.Z,null,"To Product"))),r.createElement("br",null),r.createElement("div",null,r.createElement("h6",null,"Add A New Product ",r.createElement("br",null),r.createElement(V.Z,{onClick:()=>m(!o)},"Add"),o&&r.createElement(Ie,null,"show/hide typography"))),r.createElement("br",null),r.createElement("h6",null,"Users List:",r.createElement("br",null),r.createElement(V.Z,{onClick:()=>d(!i)},"Update Users List"),i&&r.createElement(he,null,"show/hide typography")),r.createElement("br",null)):null))}));class je extends r.Component{componentDidMount(){this.props.loadInitialData(),this.props.fetchProducts()}componentDidUpdate(e){!e.isLoggedIn&&this.props.isLoggedIn&&this.props.fetchCart()}render(){const{isLoggedIn:e,isAdmin:t}=this.props;return r.createElement("div",null,r.createElement(c.rs,null,r.createElement(c.AW,{exact:!0,path:"/",component:de}),r.createElement(c.AW,{path:"/login",component:ae}),r.createElement(c.AW,{path:"/signup",component:re}),r.createElement(c.AW,{path:"/cart",component:Ne}),r.createElement(c.AW,{path:"/checkout",component:we}),r.createElement(c.AW,{path:"billing",component:be}),r.createElement(c.AW,{exact:!0,path:"/products",component:de}),r.createElement(c.AW,{exact:!0,path:"/users/:id",component:Fe}),r.createElement(c.AW,{path:"/products/:id",component:Ze}),r.createElement(c.AW,{exact:!0,path:"/brands",component:me}),r.createElement(c.AW,{path:"/products/:id/update",component:Pe}),r.createElement(c.AW,{path:"/products/:id/reviews",component:Te}),r.createElement(c.AW,{path:"/products/:id/add",component:Ce}),e&&r.createElement(c.rs,null,r.createElement(c.AW,{path:"/cart",component:Ne}),r.createElement(c.AW,{path:"/checkout",component:we}),r.createElement(c.AW,{path:"billing",component:be}),r.createElement(c.AW,{exact:!0,path:"/users/:id/orders",component:ke})),e&&t&&r.createElement(c.AW,{exact:!0,path:"/users",component:he}),r.createElement(c.AW,{component:xe}),r.createElement(c.l_,{from:"/login",to:"/"}),r.createElement(c.l_,{exact:!0,to:"/",component:de})))}}const Le=(0,c.EN)((0,l.$j)((e=>({isLoggedIn:!!e.auth.id,isAdmin:!!e.auth.isAdmin,logOut:e.logout})),(e=>({fetchCart:()=>e(I()),fetchProducts:()=>e(C()),loadInitialData(){e(b())}})))(je)),Oe=()=>r.createElement("div",null,r.createElement(K,null),r.createElement(Le,null));n.render(r.createElement(l.zt,{store:B},r.createElement(c.F0,{history:o},r.createElement(Oe,null))),document.getElementById("app"))}},e=>{e.O(0,[278,917,794,612,25,617,418,642,104,655,220,105,607,572,996,779,593,623,224,566,908,216,290,812,54,162,301,260,407],(()=>(1962,e(e.s=1962)))),e.O()}]);
//# sourceMappingURL=main.9ee6a928.js.map